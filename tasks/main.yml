---
- name: Install keyboard-configuration
  become: true
  ansible.builtin.apt:
    name:
      - keyboard-configuration
      - console-setup
    state: present
  when: ansible_os_family == 'Debian'

- name: Write keyboard configration
  become: true
  ansible.builtin.template:
    src: keyboards.j2
    dest: /etc/default/keyboard
    force: yes
    owner: root
    group: root
    mode: 'u=rw,go=r'
  notify:
    - dpkg-reconfigure keyboard-configuration
